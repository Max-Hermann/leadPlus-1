<div class="col-lg-12">
    <div class="ibox chat-view">
        <div class="ibox-title text-left">
            {{ 'COMMON_COMMENTS' | translate }}
            <small ng-if="parent.comments[saleChildData.id].length>0" class="pull-right text-muted">{{ 'COMMON_COMMENTS_LAST' | translate }}:
                {{(parent.comments[saleChildData.id])[(parent.comments[saleChildData.id]).length-1].date|
                date:'dd.MM.yyyy HH:mm:ss'}}
            </small>
        </div>
        <div class="ibox-content text-left">
            <div class="row" ng-if="parent.comments[saleChildData.id].length>0">
                <div class="col-md-12">
                    <div class="chat-discussion" ng-model="parent.comments[saleChildData.id]">
                        <div ng-repeat="comment in parent.comments[saleChildData.id] | orderBy: '-date' | limitTo: 3">
                            <div ng-if="$index%2==0" class="chat-message left">
                                <img class="message-avatar" src="assets/img/guest.png" alt="">
                                <div class="message">
                                    <a class="message-author"> {{comment.creator.username}} </a>
                                    <span class="message-date"> {{comment.date|  date:'dd.MM.yyyy HH:mm:ss'}} </span>
                                            <span class="message-content">
                                                {{comment.commentText}}
                                            </span>
                                </div>
                            </div>
                            <div ng-if="$index%2!=0" class="chat-message right">
                                <img class="message-avatar" src="assets/img/guest.png" alt="">
                                <div class="message">
                                    <a class="message-author" href="#"> {{comment.creator.username}} </a>
                                    <span class="message-date"> {{comment.date |  date:'dd.MM.yyyy HH:mm:ss'}} </span>
                                            <span class="message-content">
                                                {{comment.commentText}}
                                            </span>
                                </div>
                            </div>
                        </div>
                        </br>
                        <div ng-if="parent.comments[saleChildData.id].length>3"
                             class="text-center"><a ng-click="parent.loadCurrentIdToModal(saleChildData.id)"
                                                    data-toggle="modal" data-target="#commentModal">{{ 'COMMON_COMMENTS_HISTORY' | translate }}</a>
                        </div>
                    </div>
                </div>
            </div>
            <div class="row">
                <div class="col-lg-12">
                    <div class="chat-message-form" style="width:100%">

                        <div class="form-group" style="width:100%">
                                <textarea class="form-control message-input"
                                          ng-model="parent.commentInput[saleChildData.id]"
                                          style="resize: none; width:100%;box-sizing: border-box;"
                                          name="message"
                                          placeholder="{{ 'COMMON_COMMENTS_ENTER' | translate }}"/>
                        </div>
                        <button style="width:200px; margin-top: 10px;"
                                class="btn btn-success" ng-click="parent.addComment(saleChildData.id,'table')">
                            <i class="fa fa-comment-o"></i>&nbsp;{{ 'COMMON_COMMENTS_ADD' | translate }}
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>