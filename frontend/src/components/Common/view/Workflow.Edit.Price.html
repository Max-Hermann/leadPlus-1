<div class="row">
    <!-- Calculation -->
    <div class="row">
        <div class="col-sm-12">
            <!-- OFFER PRICE -->
            <div ng-if="type=='offer' " class="form-group" ng-class="{ 'has-error' : parent.editForm.offerPrice.$invalid
                                && !parent.editForm.offerPrice.$pristine } ">
                <label>{{ 'COMMON_PRODUCT_OFFER_PRICE'| translate }}<span style="color:red ">*</span></label>
                <div class="input-group ">
                    <span class="input-group-addon ">{{ 'COMMON_CURRENCY'| translate }}</span>
                    <input type="number " name="offerPrice " class="form-control " ng-model="parent.editWorkflowUnit.offerPrice
                                " ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/ " step="0.01 " min="0 " data-number-to-fixed="2 "
                        data-number-stepfactor="100 " class="form-control
                                currency " id="c2 " required>
                </div>
                <p ng-show="parent.editForm.offerPrice.$invalid && !parent.editForm.offerPrice.$pristine " class="help-block ">{{ 'COMMON_VALIDATE_REQ'| translate }}({{ 'COMMON_VALIDATE_REQ_NUMBER'| translate }})</p>
            </div>
        </div>
        <div class="col-sm-12">
            <div>
                <div class="form-group ">
                    <table class="table ">
                        <tr>
                            <td></td>
                            <td>{{ 'COMMON_PRODUCT_BASE_PRICE' | translate }}</td>
                            <td>{{parent.sumBasicPriceOrderPositions(parent.currentOrderPositions)| currency:'\u20AC'}}
                            </td>
                        </tr>
                        <tr>
                            <td><b>-</b></td>
                            <td>{{ 'PRODUCT_DISCOUNT' | translate }}</td>
                            <td>{{parent.sumBasicPriceOrderPositions(parent.currentOrderPositions) - parent.sumOrderPositions(parent.currentOrderPositions)|
                                currency:'\u20AC'}} ({{parent.workflowService.calculateDiscount(parent.sumBasicPriceOrderPositions(parent.currentOrderPositions),parent.sumOrderPositions(parent.currentOrderPositions))}}%)
                            </td>
                        </tr>
                        <tr>
                            <td><b>+</b></td>
                            <td>{{ 'COMMON_PRODUCT_DELIVERYCOSTS' | translate }}</td>
                            <td>{{parent.editWorkflowUnit.deliveryCosts|currency:'\u20AC'}}</td>
                        </tr>
                        <tr>
                            <td><b>=</b></td>
                            <td>
                                <h3>{{ 'COMMON_PRODUCT_ENTIRE_PRICE' | translate }}</h3>
                            </td>
                            <td>
                                <h3>{{parent.sumOrderPositions(parent.currentOrderPositions)+parent.editWorkflowUnit.deliveryCosts|currency:'\u20AC'}}</h3>
                            </td>
                        </tr>
                        <tr>
                            <td><b>-</b></td>
                            <td>{{ 'PRODUCT_DISCOUNT' | translate }}</td>
                            <td>{{(parent.sumOrderPositions(parent.currentOrderPositions)+parent.editWorkflowUnit.deliveryCosts)-parent.editWorkflowUnit.offerPrice|
                                currency:'\u20AC'}} ({{parent.workflowService.calculateDiscount(parent.sumOrderPositions(parent.currentOrderPositions)+parent.editWorkflowUnit.deliveryCosts,parent.editWorkflowUnit.offerPrice)}}%)
                            </td>
                        </tr>
                        <tr>
                            <td><b>=</b></td>
                            <td>
                                <h3>{{ 'COMMON_PRODUCT_OFFER_PRICE' | translate }}</h3>
                            </td>
                            <td>
                                <h3>{{parent.editWorkflowUnit.offerPrice|currency:'\u20AC'}}</h3>
                            </td>
                        </tr>
                        <tr>
                            <td><b>+</b></td>
                            <td>
                                Mehrwertsteuer
                            </td>
                            <td>{{parent.editWorkflowUnit.offerPrice*(mwst/100)|currency:'\u20AC'}} (<span ng-show="!inputfield ">{{mwst}}%</span>
                                <div class="input-group " ng-show="inputfield ">
                                    <span class="input-group-addon ">%</span>
                                    <input type="number " ng-model="mwst " ng-init="mwst=19 " ng-blur="inputfield=! inputfield " ng-pattern="/^[0-9]+(\.[0-9]{1,2})?$/ "
                                        step="0.01 " min="0 " max="100 " ng-class="{
                                'has-error' : mwst.$invalid && !mwst.$pristine } ">
                                </div>&nbsp;
                                <a class="close-link " ng-click="inputfield=! inputfield " ng-show="!inputfield
                                "><i class="fa fa-pencil-square-o "></i></a>)</td>
                        </tr>
                        <tr>
                            <td><b>=</b></td>
                            <td>
                                <h3>{{ 'COMMON_PRODUCT_OFFER_PRICE' | translate }}</h3>
                            </td>
                            <td>
                                <h3>{{parent.editWorkflowUnit.offerPrice*(1+(mwst/100))|currency:'\u20AC'}}</h3>
                            </td>
                        </tr>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
    $(document).ready(function () {
        $('#editOfferDatepicker .input-group.date').datepicker({
            todayBtn: "linked ",
            keyboardNavigation: false,
            forceParse: false,
            calendarWeeks: true,
            autoclose: true
        });
    });
</script>