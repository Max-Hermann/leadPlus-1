<style>
	.not-sortable {
		opacity: 0.75;
		cursor: default !important;
	}
</style>

<div class="ibox float-e-margins">
	<div class="ibox-title">
		<h5>{{ 'DASHBOARD_MANAGE_LEADS' | translate }}</h5>
	</div>
	<div class="ibox-content">
		<div class="row" style="margin: 0px; margin-bottom: 10px;">
			<span class="pull-left small"><i class="fa fa-hand-o-up"></i> {{ 'DASHBOARD_DRAG_INFO' | translate }}</span>
			<span class="pull-right">  <button ng-click="dashboardCtrl.refreshData()" type="button"
                                                       class="btn btn-success">
                        <i class="fa fa-refresh"></i>&nbsp;{{ 'DASHBOARD_REFRESH' | translate }}
                    </button></span>
		</div>
		<div class="row">
			<div style="min-width:290px" class="col-lg-3">
				<div class="ibox">
					<div class="ibox-content">
						<h3>{{ 'DASHBOARD_OPEN_LEADS' | translate }} {{dashboardCtrl.dashboardService.openLeadsValue| currency:'\u20AC'}}
						</h3>
						<ul ui-sortable="dashboardCtrl.sortableOptions" class="sortable-list connectList agile-list" id="lead" ng-model="dashboardCtrl.dashboardService.openLeads">
							<li class="danger-element draggable" ng-repeat="process in dashboardCtrl.getOpenLeads() | limitTo:10">
								<div ng-if="process.lead.customer.company!=null&&process.lead.customer.company!=''" style="max-width:50%;max-height:22px;min-height:22px">
									{{process.lead.customer.company}}

								</div>
								<div ng-if="process.lead.customer.company==null||process.lead.customer.company==''" style="max-width:50%;max-height:22px;min-height:22px">
									{{process.lead.customer.firstname}} {{process.lead.customer.lastname}}

								</div>
								<div style="margin-top:-13px">
									<span ng-if="process.processor!=null" class="pull-right">
                                            <img title="{{process.processor.firstname+' '+process.processor.lastname}}" style="width: 45px; height:45px;border-radius: 10%;" pictureId="{{process.processor.picture.id}}" httpsrc="users/{{process.processor.id}}/profile/picture" alt="">
                                        </span>
									<a style="min-width:50px;margin-right:5px" ng-click="dashboardCtrl.saveDataToModal(process.lead,'lead',process)" class="pull-right btn btn-xs btn-white"
										data-toggle="modal" data-target="#infoModal">{{ 'DASHBOARD_INFO_BUTTON' |  translate }}</a>&nbsp;&nbsp;&nbsp;
									<div class="agile-detail">
										<a style="min-width:50px;margin-right:-50px" ng-href="#/leads/{{process.id}}" class="pull-right btn btn-xs btn-white">{{
                                                'DASHBOARD_GOTO_BUTTON' | translate }}</a>
									</div>
									<div style="white-space: nowrap;max-width:55%;overflow:hidden;text-overflow: ellipsis;">
										<i style="margin-top:12px;" class="fa fa-clock-o"></i> {{dashboardCtrl.toLocalDate(process.lead.timestamp)}}
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div style="min-width:290px" class="col-lg-3">
				<div class="ibox">
					<div class="ibox-content">
						<h3>{{ 'COMMON_STATUS_INCONTACT' | translate }} {{dashboardCtrl.dashboardService.inContactsValue| currency:'\u20AC'}}
						</h3>
						<ul ui-sortable="dashboardCtrl.sortableOptions" class="sortable-list connectList agile-list" id="lead" ng-model="dashboardCtrl.dashboardService.inContacts">
							<li class="danger-element draggable" ng-repeat="process in dashboardCtrl.getInContacts() | limitTo:10">
								<div ng-if="process.lead.customer.company!=null&&process.lead.customer.company!=''" style="max-width:50%;max-height:22px;min-height:22px">
									{{process.lead.customer.company}}

								</div>
								<div ng-if="process.lead.customer.company==null||process.lead.customer.company==''" style="max-width:50%;max-height:22px;min-height:22px">
									{{process.lead.customer.firstname}} {{process.lead.customer.lastname}}

								</div>
								<div style="margin-top:-13px">
									<span ng-if="process.processor!=null" class="pull-right">
                                            <img title="{{process.processor.firstname+' '+process.processor.lastname}}" style="width: 45px; height:45px;border-radius: 10%;" httpsrc="users/{{process.processor.id}}/profile/picture" alt="">
                                        </span>
									<a style="min-width:50px;margin-right:5px" ng-click="dashboardCtrl.saveDataToModal(process.lead,'lead',process)" class="pull-right btn btn-xs btn-white"
										data-toggle="modal" data-target="#infoModal">{{ 'DASHBOARD_INFO_BUTTON' |  translate }}</a>&nbsp;&nbsp;&nbsp;
									<div class="agile-detail">
										<a style="min-width:50px;margin-right:-50px" ng-href="#/leads/{{process.id}}" class="pull-right btn btn-xs btn-white">{{
                                                'DASHBOARD_GOTO_BUTTON' | translate }}</a>
									</div>
									<div style="white-space: nowrap;max-width:55%;overflow:hidden;text-overflow: ellipsis;">
										<i style="margin-top:12px;" class="fa fa-clock-o"></i> {{dashboardCtrl.toLocalDate(process.lead.timestamp)}}
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div style="min-width:290px" class="col-lg-3">
				<div class="ibox">
					<div class="ibox-content">
						<h3>{{ 'DASHBOARD_OPEN_OFFERS' | translate }} {{dashboardCtrl.dashboardService.openOffersValue| currency:'\u20AC'}}
						</h3>
						<ul ui-sortable="dashboardCtrl.sortableOptions" class="sortable-list connectList agile-list" id="offer" ng-model="dashboardCtrl.dashboardService.openOffers">
							<li class="warning-element draggable" ng-repeat="process in dashboardCtrl.getOpenOffers() | limitTo:10">
								<div ng-if="process.offer.customer.company!=null&&process.offer.customer.company!=''" style="max-width:50%;max-height:22px;min-height:22px">
									{{process.offer.customer.company}}

								</div>
								<div ng-if="process.offer.customer.company==null||process.offer.customer.company==''" style="max-width:50%;max-height:22px;min-height:22px">
									{{process.offer.customer.firstname}} {{process.offer.customer.lastname}}

								</div>
								<div style="margin-top:-20px">
									<span ng-if="process.processor!=null" class="pull-right">
                                                    <img title="{{process.processor.firstname+' '+process.processor.lastname}}" style="width: 45px; height:45px;border-radius: 10%;" httpsrc="users/{{process.processor.id}}/profile/picture" alt="">
                                                 </span>
									<a style="min-width:50px;margin-right:5px" ng-click="dashboardCtrl.saveDataToModal(process.offer,'offer',process)" class="pull-right btn btn-xs btn-white"
										data-toggle="modal" data-target="#infoModal">{{ 'DASHBOARD_INFO_BUTTON' |  translate }}</a>&nbsp;&nbsp;&nbsp;
									<div class="agile-detail">
										<a style="min-width:50px;margin-right:-50px" ng-href="#/offers/{{process.id}}" class="pull-right btn btn-xs btn-white">{{
                                                'DASHBOARD_GOTO_BUTTON' | translate }}</a>
									</div>
									<div style="white-space: nowrap;max-width:55%;overflow:hidden;text-overflow: ellipsis;">
										<i style="margin-top:12px;" class="fa fa-clock-o"></i> {{dashboardCtrl.toLocalDate(process.offer.timestamp)}}
										<i ng-if="process.status== 'FOLLOWUP'" title="{{'OFFER_FOLLOW_UP'| translate }}" class="fa fa-eye" aria-hidden="true" ng-click="dashboardCtrl.openFollowUpModal(process)"></i>
										<i ng-if="process.status== 'FOLLOWUP'">{{ process.followUpAmount}}</i>
									</div>

								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
			<div style="min-width:290px" class="col-lg-3">
				<div class="ibox">
					<div class="ibox-content">
						<h3>{{ 'DASHBOARD_LATEST_SALES' | translate }} {{dashboardCtrl.dashboardService.closedSalesValue| currency:'\u20AC'}}
						</h3>
						<ul ui-sortable="dashboardCtrl.sortableOptions" class="sortable-list connectList agile-list" id="sale" ng-model="dashboardCtrl.dashboardService.closedSales">
							<li class="info-element not-sortable draggable" ng-repeat="process in dashboardCtrl.getClosedSales() | limitTo:10">
								<div ng-if="process.sale.customer.company!=null&&process.sale.customer.company!=''" style="max-width:50%;max-height:22px;min-height:22px">
									{{process.sale.customer.company}}

								</div>
								<div ng-if="process.sale.customer.company==null||process.sale.customer.company==''" style="max-width:50%;max-height:22px;min-height:22px">
									{{process.sale.customer.firstname}} {{process.sale.customer.lastname}}

								</div>

								<div style="margin-top:-20px">
									<span ng-if="process.processor!=null" class="pull-right">
                                            <img title="{{process.processor.firstname+' '+process.processor.lastname}}" style="width: 45px; height:45px;border-radius: 10%;" pictureid="{{process.processor.picture.id}}" httpsrc="users/{{process.processor.id}}/profile/picture" alt="">
                                        </span>
									<a style="min-width:50px;margin-right:5px" ng-click="dashboardCtrl.saveDataToModal(process.sale,'sale',process)" class="pull-right btn btn-xs btn-white"
										data-toggle="modal" data-target="#infoModal">{{ 'DASHBOARD_INFO_BUTTON' |  translate }}</a>&nbsp;&nbsp;&nbsp;
									<div class="agile-detail">
										<a style="min-width:50px;margin-right:-50px" ng-href="#/sales/{{process.id}}" class="pull-right btn btn-xs btn-white">{{
                                                'DASHBOARD_GOTO_BUTTON' | translate }}</a>
									</div>
									<div style="white-space: nowrap;max-width:55%;overflow:hidden;text-overflow: ellipsis;">
										<i style="margin-top:12px;" class="fa fa-clock-o"></i> {{dashboardCtrl.toLocalDate(process.sale.timestamp)}}
									</div>
								</div>
							</li>
						</ul>
					</div>
				</div>
			</div>
		</div>
	</div>
</div>

<!--Page level script-->
<script>
    $(function () {
        $(".draggable").draggable();
    });
</script>